<template>
  <v-row justify="center">
    
    <v-dialog v-model="is_visible" persistent max-width="290">

      <v-card>
        <v-card-title class="headline">Removing data</v-card-title>
        <v-card-text>
          Are you sure to remove register {{objrow.id}} related to IP: {{objrow.remote_ip}}
          created at {{objrow.insert_date}}<br/>
          <b>This operation is irreversible</b>
        </v-card-text>
        <v-card-actions>
          <v-spacer></v-spacer>
          <v-btn color="secondary darken-1" text @click="cancel">Cancel</v-btn>
          <v-btn color="error darken-1" text @click="accept">Accept</v-btn>
        </v-card-actions>
      </v-card>
    </v-dialog>
  </v-row>
</template>

<script lang="ts">
import progressbar from "@/components/common/bars/progress_bar.vue"
import notisuccess from "@/components/common/notifications/notification_success.vue"
import notierror from "@/components/common/notifications/notification_error.vue"
import api from "../../providers/api"

export default {
  name: "formremove",
  props:{
    isvisible: Boolean,
    objrow:{},
  },

  components:{

  },

  computed:{
    is_visible:{
      get(){
        return this.isvisible
      },
      set(val){
        //alert("emiting evtclose:"+val)
        this.$emit("evtclose",val)
      }
    }
  },

  methods:{
    async_accept: async function(objrow){
      await api.async_delete(objrow,["id"])
      
      this.$emit("evtremove","ok")
    },

    cancel(){
      //alert("canceling y setting is_visible false para que emita evtclose")
      this.is_visible = false
    }
  },
}
</script>